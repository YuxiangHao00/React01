{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Tabs,Select,Button,Spin}from'antd';import{MapContainer,TileLayer,Marker,Popup}from'react-leaflet';import L from'leaflet';import axios from'axios';import'leaflet/dist/leaflet.css';import'./index.css';import Country from'./country';import City1 from'./city1';// 修复 Leaflet 默认图标问题\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:require('leaflet/dist/images/marker-icon-2x.png'),iconUrl:require('leaflet/dist/images/marker-icon.png'),shadowUrl:require('leaflet/dist/images/marker-shadow.png')});// 自定义图标\nconst customIcon=new L.Icon({iconUrl:require('../../images/Logo_icon.svg'),iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:'custom-marker-icon'});function SuburbFinder(){const[showCity,setShowCity]=useState(false);const[selectedCity,setSelectedCity]=useState('Melbourne');const[activeTab,setActiveTab]=useState('1');const[tempCity1,setTempCity1]=useState('');const[siteData,setSiteData]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{fetchSiteData();},[]);const fetchSiteData=async()=>{setLoading(true);try{const response=await axios.get('YOUR_API_ENDPOINT');//API 端点\nsetSiteData(response.data);}catch(error){console.error('Error fetching site data:',error);}finally{setLoading(false);}};const handleTabChange=key=>{setActiveTab(key);};const citys=siteData.map(site=>({name:site.name,position:[site.latitude,site.longitude]}));return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Tabs,{defaultActiveKey:\"1\",centered:true,items:[{label:'Air Quality',key:'1'},{label:'Allergic Pollens',key:'2'}],onChange:handleTabChange}),activeTab==='1'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-4 mt-[40px]\",children:[/*#__PURE__*/_jsx(Select,{className:\"w-[300px]\",placeholder:\"City\",value:tempCity1,onChange:value=>setTempCity1(value),children:citys.map(item=>/*#__PURE__*/_jsx(Select.Option,{value:item.name,children:item.name},item.name))}),/*#__PURE__*/_jsx(Button,{className:\"bg-[#00BD90] text-white\",onClick:()=>{setShowCity(true);setSelectedCity(tempCity1);},disabled:!tempCity1,children:\"Switch\"}),/*#__PURE__*/_jsx(Button,{className:\"bg-[#00BD90] text-white\",onClick:()=>{setShowCity(false);setTempCity1('');},children:\"Return\"})]}),showCity?/*#__PURE__*/_jsx(City1,{city:selectedCity}):/*#__PURE__*/_jsx(Country,{})]}),activeTab==='2'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:loading?/*#__PURE__*/_jsx(Spin,{size:\"large\"}):/*#__PURE__*/_jsxs(MapContainer,{center:[-25.2744,133.7751],zoom:4,scrollWheelZoom:false,className:\"leaflet-container\",children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}),siteData.map(site=>/*#__PURE__*/_jsx(Marker,{position:[site.latitude,site.longitude],icon:customIcon,children:/*#__PURE__*/_jsxs(Popup,{children:[site.name,\": \",site.value]})},site.name))]})})})]});}export default SuburbFinder;","map":{"version":3,"names":["React","useState","useEffect","Tabs","Select","Button","Spin","MapContainer","TileLayer","Marker","Popup","L","axios","Country","City1","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","customIcon","iconSize","iconAnchor","popupAnchor","shadowSize","className","SuburbFinder","showCity","setShowCity","selectedCity","setSelectedCity","activeTab","setActiveTab","tempCity1","setTempCity1","siteData","setSiteData","loading","setLoading","fetchSiteData","response","get","data","error","console","handleTabChange","key","citys","map","site","name","position","latitude","longitude","children","defaultActiveKey","centered","items","label","onChange","placeholder","value","item","Option","onClick","disabled","city","size","center","zoom","scrollWheelZoom","url","attribution","icon"],"sources":["D:/GitClone/link2herreslience/Dev/frontend/react-app/src/views/SuburbFinder/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Tabs, Select, Button, Spin } from 'antd';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport axios from 'axios';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './index.css';\r\nimport Country from './country';\r\nimport City1 from './city1';\r\n\r\n// 修复 Leaflet 默认图标问题\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n});\r\n\r\n// 自定义图标\r\nconst customIcon = new L.Icon({\r\n  iconUrl: require('../../images/Logo_icon.svg'),\r\n  iconSize: [25, 41],\r\n  iconAnchor: [12, 41],\r\n  popupAnchor: [1, -34],\r\n  shadowSize: [41, 41],\r\n  className: 'custom-marker-icon'\r\n});\r\n\r\nfunction SuburbFinder() {\r\n  const [showCity, setShowCity] = useState(false);\r\n  const [selectedCity, setSelectedCity] = useState('Melbourne');\r\n  const [activeTab, setActiveTab] = useState('1');\r\n  const [tempCity1, setTempCity1] = useState('');\r\n  const [siteData, setSiteData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchSiteData();\r\n  }, []);\r\n\r\n  const fetchSiteData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.get('YOUR_API_ENDPOINT'); //API 端点\r\n      setSiteData(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching site data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTabChange = (key) => {\r\n    setActiveTab(key);\r\n  };\r\n\r\n  const citys = siteData.map(site => ({\r\n    name: site.name,\r\n    position: [site.latitude, site.longitude]\r\n  }));\r\n\r\n  return (\r\n    <div className=\"text-center\">\r\n      <Tabs\r\n        defaultActiveKey=\"1\"\r\n        centered\r\n        items={[\r\n          { label: 'Air Quality', key: '1' },\r\n          { label: 'Allergic Pollens', key: '2' },\r\n        ]}\r\n        onChange={handleTabChange}\r\n      />\r\n      \r\n      {activeTab === '1' && (\r\n        <div>\r\n          <div className='flex justify-center gap-4 mt-[40px]'>\r\n            <Select \r\n              className=\"w-[300px]\" \r\n              placeholder=\"City\" \r\n              value={tempCity1} \r\n              onChange={value => setTempCity1(value)}\r\n            >\r\n              {citys.map((item) => (\r\n                <Select.Option key={item.name} value={item.name}>{item.name}</Select.Option>\r\n              ))}\r\n            </Select>\r\n            <Button\r\n              className=\"bg-[#00BD90] text-white\"\r\n              onClick={() => { setShowCity(true); setSelectedCity(tempCity1); }}\r\n              disabled={!tempCity1}\r\n            >\r\n              Switch\r\n            </Button>\r\n            <Button \r\n              className=\"bg-[#00BD90] text-white\" \r\n              onClick={() => {setShowCity(false);setTempCity1('')}}\r\n            >\r\n              Return\r\n            </Button>\r\n          </div>\r\n          {showCity ? <City1 city={selectedCity} /> : <Country />}\r\n        </div>\r\n      )}\r\n      \r\n      {activeTab === '2' && (\r\n        <div>\r\n          <div className=\"map-container\">\r\n            {loading ? (\r\n              <Spin size=\"large\" />\r\n            ) : (\r\n              <MapContainer \r\n                center={[-25.2744, 133.7751]} \r\n                zoom={4} \r\n                scrollWheelZoom={false}\r\n                className=\"leaflet-container\"\r\n              >\r\n                <TileLayer\r\n                  url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                  attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                />\r\n                {siteData.map((site) => (\r\n                  <Marker \r\n                    key={site.name} \r\n                    position={[site.latitude, site.longitude]} \r\n                    icon={customIcon}\r\n                  >\r\n                    <Popup>\r\n                      {site.name}: {site.value}\r\n                    </Popup>\r\n                  </Marker>\r\n                ))}\r\n              </MapContainer>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SuburbFinder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}